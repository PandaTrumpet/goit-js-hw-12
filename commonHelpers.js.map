{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["const list = document.querySelector('.todo-list');\n\nexport default function makeMarkup(images) {\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        likes,\n        views,\n        comments,\n        downloads,\n        largeImageURL,\n        tags,\n      }) => {\n        return `<li class=\"photo-main-list\">\n        \n<a class=\"galery-link\"  href=\"${largeImageURL}\">\n<img class=\"photo\" width=\"360\" height=\"200\" src=\"${webformatURL}\" alt=\"${tags}\" />\n</a>\n\n<ul class='list-menu'>\n  <li class='description'>\n    <h3 class='title'>Likes</h3>\n    <p class='datas'>${likes}</p>\n  </li>\n  <li class='description'>\n    <h3 class='title'>Views</h3>\n    <p class='datas'>${views}</p>\n  </li>\n  <li class='description'>\n    <h3 class='title'>Comments</h3>\n    <p class='datas'>${comments}</p>\n  </li>\n  <li class='description'>\n    <h3 class='title'>Downloads</h3>\n    <p class='datas'>${downloads}</p>\n  </li>\n</ul>\n</li>\n`;\n      }\n    )\n    .join('');\n\n  list.insertAdjacentHTML('beforeend', markup);\n}\n","import axios from 'axios';\n\nconst KEY = '42475254-bcb32dbc18887673c1cce19dd';\nconst BASE_URI = 'https://pixabay.com/api/';\nconst IMAGE_TYPE = 'photo';\nconst ORIENTATION = 'horizontal';\nconst SAFESEARCH = 'true';\n\nexport default async function getNewFotos(query, amount, page) {\n  const LINK = `${BASE_URI}?key=${KEY}&q=${query}&image_type=${IMAGE_TYPE}&orientation=${ORIENTATION}&safesearch=${SAFESEARCH}&per_page=${amount}&page=${page} `;\n\n  return await axios.get(LINK).then(res => {\n    if (!res.status === 200) {\n      throw new Error('Image is no found!!!');\n    }\n\n    return res.data;\n  });\n}\n\n\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport makeMarkup from './js/render-functions';\nimport getNewFotos from './js/pixabay-api';\n\nconst input = document.querySelector('.input-text');\nconst searchForm = document.querySelector('.main-form');\nconst loadMoreBtn = document.querySelector('.load-btn');\nconst list = document.querySelector('.todo-list');\nconst loader = document.querySelector('.loading');\n\nconst lightbox = new SimpleLightbox('.todo-list a.galery-link', {\n  captionsData: 'alt',\n  captionDelay: 500,\n});\nlet currentQuery;\n\nexport default function handler(event) {\n  event.preventDefault();\n\n  list.innerHTML = null;\n\n  let query = event.target.elements.input.value.trim();\n\n  getNewFotos(query, 15, 1).then(data => {\n    if (data.hits.length === 0) {\n      list.innerHTML = '';\n      loader.style.display = 'none';\n      loadMoreBtn.classList.add('is-hidden');\n      return handlerError();\n    }\n    loader.style.display = 'inline-block';\n    makeMarkup(data.hits);\n\n    lightbox.refresh();\n\n    currentQuery = query;\n    currentPage = 1;\n    loader.style.display = 'none';\n  });\n  loadMoreBtn.classList.remove('is-hidden');\n}\n\nsearchForm.addEventListener('submit', handler);\n\nlet currentPage = 1;\n\nfunction loadImages(e) {\n  let currentQuery = input.value;\n\n  list.insertAdjacentElement('afterend', loader);\n  loader.style.display = 'inline-block';\n  currentPage++;\n  getNewFotos(currentQuery, 15, currentPage).then(data => {\n    if (data.hits < 15) {\n      loader.style.display = 'none';\n      loadMoreBtn.style.display = 'none';\n      return handlerErrorResult();\n    }\n\n    makeMarkup(data.hits);\n    loader.style.display = 'none';\n\n    lightbox.refresh();\n\n    loader.style.display = 'none';\n\n    const boxFotos = document.querySelector('.photo-main-list');\n    const rect = boxFotos.getBoundingClientRect();\n    window.scrollBy(0, rect.height * 2);\n  });\n}\nloadMoreBtn.addEventListener('click', loadImages);\n\nfunction handlerError() {\n  iziToast.error({\n    maxWidth: '432px',\n    messageSize: '16px',\n    titleColor: ' #fafafb',\n    messageColor: '#fff',\n    message: `Sorry, there are no images matching your search query. Please try again!`,\n    closeOnEscape: true,\n    position: 'topRight',\n    backgroundColor: '#ed6f7c',\n  });\n}\n\nfunction handlerErrorResult() {\n  iziToast.error({\n    maxWidth: '432px',\n    messageSize: '16px',\n    titleColor: ' #fafafb',\n    messageColor: '#fff',\n    message: \"We're sorry, but you've reached the end of search results.\",\n    closeOnEscape: true,\n    position: 'topRight',\n    backgroundColor: '#ed6f7c',\n  });\n}\n"],"names":["list","makeMarkup","images","markup","webformatURL","likes","views","comments","downloads","largeImageURL","tags","KEY","BASE_URI","IMAGE_TYPE","ORIENTATION","SAFESEARCH","getNewFotos","query","amount","page","LINK","axios","res","input","searchForm","loadMoreBtn","loader","lightbox","SimpleLightbox","handler","event","data","handlerError","currentPage","loadImages","e","currentQuery","handlerErrorResult","rect","iziToast"],"mappings":"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"}