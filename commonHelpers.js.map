{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["const list = document.querySelector('.todo-list');\n\nexport default function makeMarkup(images) {\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        likes,\n        views,\n        comments,\n        downloads,\n        largeImageURL,\n        tags,\n      }) => {\n        return `<li class=\"photo-main-list\">\n        \n<a class=\"galery-link\"  href=\"${largeImageURL}\">\n<img class=\"photo\" width=\"360\" height=\"200\" src=\"${webformatURL}\" alt=\"${tags}\" />\n</a>\n\n<ul class='list-menu'>\n  <li class='description'>\n    <h3 class='title'>Likes</h3>\n    <p class='datas'>${likes}</p>\n  </li>\n  <li class='description'>\n    <h3 class='title'>Views</h3>\n    <p class='datas'>${views}</p>\n  </li>\n  <li class='description'>\n    <h3 class='title'>Comments</h3>\n    <p class='datas'>${comments}</p>\n  </li>\n  <li class='description'>\n    <h3 class='title'>Downloads</h3>\n    <p class='datas'>${downloads}</p>\n  </li>\n</ul>\n</li>\n`;\n      }\n    )\n    .join('');\n\n  list.insertAdjacentHTML('beforeend', markup);\n}\n","import axios from 'axios';\n\nconst KEY = '42475254-bcb32dbc18887673c1cce19dd';\nconst BASE_URI = 'https://pixabay.com/api/';\nconst IMAGE_TYPE = 'photo';\nconst ORIENTATION = 'horizontal';\nconst SAFESEARCH = 'true';\n\nexport default async function getNewFotos(query, amount, page) {\n  try {\n    const LINK = `${BASE_URI}?key=${KEY}&q=${query}&image_type=${IMAGE_TYPE}&orientation=${ORIENTATION}&safesearch=${SAFESEARCH}&per_page=${amount}&page=${page}`;\n\n    const res = await axios.get(LINK);\n\n    if (res.status !== 200) {\n      throw new Error('Image is not found!!!');\n    }\n\n    return res.data;\n  } catch (error) {\n    console.error('Error occurred while fetching new photos:', error);\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport makeMarkup from './js/render-functions';\nimport getNewFotos from './js/pixabay-api';\n\nconst input = document.querySelector('.input-text');\nconst searchForm = document.querySelector('.main-form');\nconst loadMoreBtn = document.querySelector('.load-btn');\nconst list = document.querySelector('.todo-list');\nconst loader = document.querySelector('.loading');\n\nconst lightbox = new SimpleLightbox('.todo-list a.galery-link', {\n  captionsData: 'alt',\n  captionDelay: 500,\n});\nlet currentQuery;\n\nasync function handler(event) {\n  event.preventDefault();\n\n  list.innerHTML = null;\n\n  let query = event.target.elements.input.value.trim();\n\n  try {\n    const data = await getNewFotos(query, 15, 1);\n\n    if (data.hits.length === 0) {\n      list.innerHTML = '';\n      loader.style.display = 'none';\n      loadMoreBtn.classList.add('is-hidden');\n      return handlerError();\n    } else if (data.hits.length < 15) {\n      makeMarkup(data.hits);\n      loader.style.display = 'none';\n      loadMoreBtn.style.display = 'none';\n      lightbox.refresh();\n      return handlerErrorResult();\n    }\n\n    loader.style.display = 'inline-block';\n    makeMarkup(data.hits);\n    lightbox.refresh();\n    currentQuery = query;\n    currentPage = 1;\n    loader.style.display = 'none';\n  } catch (error) {\n    console.error(error);\n  }\n\n  loadMoreBtn.classList.remove('is-hidden');\n}\n\nsearchForm.addEventListener('submit', handler);\n\nlet currentPage = 1;\n\nfunction loadImages(e) {\n  e.preventDefault();\n  let currentQuery = input.value;\n\n  list.insertAdjacentElement('afterend', loader);\n  loader.style.display = 'inline-block';\n  currentPage++;\n\n  getNewFotos(currentQuery, 15, currentPage).then(data => {\n    if (data.hits.length < 15) {\n      loader.style.display = 'none';\n      loadMoreBtn.style.display = 'none';\n      return handlerErrorResult();\n    } else {\n      makeMarkup(data.hits);\n      loader.style.display = 'none';\n      lightbox.refresh();\n      loader.style.display = 'none';\n      const boxFotos = document.querySelector('.photo-main-list');\n      const rect = boxFotos.getBoundingClientRect();\n      window.scrollBy(0, rect.height * 2);\n    }\n  });\n}\n\nloadMoreBtn.addEventListener('click', loadImages);\n\nfunction handlerError() {\n  iziToast.error({\n    maxWidth: '432px',\n    messageSize: '16px',\n    titleColor: ' #fafafb',\n    messageColor: '#fff',\n    message: `Sorry, there are no images matching your search query. Please try again!`,\n    closeOnEscape: true,\n    position: 'topRight',\n    backgroundColor: '#ed6f7c',\n  });\n}\n\nfunction handlerErrorResult() {\n  iziToast.error({\n    maxWidth: '432px',\n    messageSize: '16px',\n    titleColor: ' #fafafb',\n    messageColor: '#fff',\n    message: \"We're sorry, but you've reached the end of search results.\",\n    closeOnEscape: true,\n    position: 'topRight',\n    backgroundColor: '#ed6f7c',\n  });\n}\n"],"names":["list","makeMarkup","images","markup","webformatURL","likes","views","comments","downloads","largeImageURL","tags","KEY","BASE_URI","IMAGE_TYPE","ORIENTATION","SAFESEARCH","getNewFotos","query","amount","page","LINK","res","axios","error","input","searchForm","loadMoreBtn","loader","lightbox","SimpleLightbox","currentQuery","handler","event","data","handlerError","handlerErrorResult","currentPage","loadImages","e","rect","iziToast"],"mappings":"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"}